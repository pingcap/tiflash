mysql> drop table if exists test.t;
mysql> create table test.t(a varchar(30) charset utf8mb4 collate utf8mb4_general_ci, b varchar(30) charset utf8mb4 collate utf8mb4_general_ci);
mysql> alter table test.t set tiflash replica 1;
mysql> insert into test.t values ('abc', 'ABC'),('Abc', 'abc'),('def', 'dEf');
func> wait_table test t

>> DBGInvoke __try_flush()

mysql> set session tidb_isolation_read_engines='tiflash'; select /*+ read_from_storage(tiflash[t]) */ count(*) from test.t where strcmp(a, b) = 0;
+----------+
| count(*) |
+----------+
|        3 |
+----------+

mysql> drop table if exists test.t
