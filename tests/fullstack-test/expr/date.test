mysql> drop table if exists test.t
mysql> create table if not exists test.t(col_date date, col_datetime datetime, col_string char(24), col_int bigint(11))
mysql> insert into test.t values('2006-10-11', '2007-10-11 10:10:10', '2006-10-11 10:10:10', 20061011), ('2006-10-11', '2006-10-11 10:10:10', '2007-10-11 10:10:10', 20061011111111)
mysql> alter table test.t set tiflash replica 1

func> wait_table test t

mysql> set @@tidb_isolation_read_engines='tiflash'; select * from test.t where col_date = date(col_string);
+------------+---------------------+---------------------+----------+
| col_date   | col_datetime        | col_string          | col_int  |
+------------+---------------------+---------------------+----------+
| 2006-10-11 | 2007-10-11 10:10:10 | 2006-10-11 10:10:10 | 20061011 |
+------------+---------------------+---------------------+----------+

mysql> set @@tidb_isolation_read_engines='tiflash'; select * from test.t where col_date < date(col_string);
+------------+---------------------+---------------------+----------------+
| col_date   | col_datetime        | col_string          | col_int        |
+------------+---------------------+---------------------+----------------+
| 2006-10-11 | 2006-10-11 10:10:10 | 2007-10-11 10:10:10 | 20061011111111 |
+------------+---------------------+---------------------+----------------+

mysql> set @@tidb_isolation_read_engines='tiflash'; select * from test.t where col_date = date(col_datetime);
+------------+---------------------+---------------------+----------------+
| col_date   | col_datetime        | col_string          | col_int        |
+------------+---------------------+---------------------+----------------+
| 2006-10-11 | 2006-10-11 10:10:10 | 2007-10-11 10:10:10 | 20061011111111 |
+------------+---------------------+---------------------+----------------+

mysql> set @@tidb_isolation_read_engines='tiflash'; select * from test.t where col_date < date(col_datetime);
+------------+---------------------+---------------------+----------+
| col_date   | col_datetime        | col_string          | col_int  |
+------------+---------------------+---------------------+----------+
| 2006-10-11 | 2007-10-11 10:10:10 | 2006-10-11 10:10:10 | 20061011 |
+------------+---------------------+---------------------+----------+

mysql> set @@tidb_isolation_read_engines='tiflash'; select * from test.t where col_date = date(col_int);
+------------+---------------------+---------------------+----------------+
| col_date   | col_datetime        | col_string          | col_int        |
+------------+---------------------+---------------------+----------------+
| 2006-10-11 | 2007-10-11 10:10:10 | 2006-10-11 10:10:10 |       20061011 |
| 2006-10-11 | 2006-10-11 10:10:10 | 2007-10-11 10:10:10 | 20061011111111 |
+------------+---------------------+---------------------+----------------+
