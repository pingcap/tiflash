mysql> drop table if exists test.t
mysql> create table test.t (id int not null auto_increment, u1 bigint unsigned, u2 bigint unsigned, s1 bigint, s2 bigint, r1 real, r2 real, d1 decimal(10, 5), d2 decimal(10, 5), c1 varchar(15), c2 varchar(15), t1 time, v1 set('a', 'b', 'c'), primary key (id))
mysql> alter table test.t set tiflash replica 1

# from TiDB TestArithmeticMod
#mysql> insert into test.t set s1 = 13, s2 = 11
#mysql> insert into test.t set s1 = 13, s2 = 11
#mysql> insert into test.t set s1 = 13, s2 = 0
#mysql> insert into test.t set u1 = 13, s2 = 0
#mysql> insert into test.t set s1 = 13, u2 = 0
#mysql> insert into test.t set u1 = 9223372036854775808, s2 = -9223372036854775808
#mysql> insert into test.t set s1 = -22, u2 = 10
#mysql> insert into test.t set s1 = -9223372036854775808, u2 = 3
#mysql> insert into test.t set s1 = -13, s2 = 11
#mysql> insert into test.t set s1 = 13, s2 = -11
#mysql> insert into test.t set s1 = -13, s2 = -11
#mysql> insert into test.t set s1 = 33, s2 = 11
#mysql> insert into test.t set s1 = -33, s2 = 11
#mysql> insert into test.t set s1 = 33, s2 = -11
#mysql> insert into test.t set s1 = -33, s2 = -11
#mysql> insert into test.t set s1 = 11, s2 = 0
#mysql> insert into test.t set s1 = -11, s2 = 0
#mysql> insert into test.t set s1 = 1, r2 = 1.1
#mysql> insert into test.t set s1 = -1, r2 = 1.1
#mysql> insert into test.t set s1 = 1, r2 = -1.1
#mysql> insert into test.t set s1 = -1, r2 = -1.1
#mysql> insert into test.t set r2 = -0.11101
#mysql> insert into test.t set r1 = 1.01
#mysql> insert into test.t set s2 = -1001
#mysql> insert into test.t set s1 = 101
#mysql> insert into test.t set s1 = null, s2 = null  /* null % null */
#mysql> insert into test.t set c1 = '1231', s2 = 12
#mysql> insert into test.t set c1 = '1231', c2 = '12'
#mysql> insert into test.t set t1 = '12:34:56', s2 = 122
#mysql> insert into test.t set v1 = 'a,b,c', c2 = '12'

# extra cases for UNSIGNED - UNGISNED
#mysql> insert into test.t set u1 = 13, u2 = 11
#mysql> insert into test.t set u1 = 33, u2 = 11
#mysql> insert into test.t set u1 = 123, u2 = 0

# extra cases for UNSIGNED - SIGNED
#mysql> insert into test.t set u1 = 13, s2 = 11
#mysql> insert into test.t set u1 = 13, s2 = -11
#mysql> insert into test.t set u1 = 33, s2 = 11
#mysql> insert into test.t set u1 = 33, s2 = -11

# extra cases for SIGNED - UNSIGNED
#mysql> insert into test.t set s1 = 13, u2 = 11
#mysql> insert into test.t set s1 = -13, u2 = 11
#mysql> insert into test.t set s1 = 33, u2 = 11
#mysql> insert into test.t set s1 = -33, u2 = 11

# extra cases for REAL type
mysql> insert into test.t set r1 = 1.3, r2 = 1.1
mysql> insert into test.t set r1 = -1.3, r2 = 1.1
mysql> insert into test.t set r1 = 1.3, r2 = -1.1
mysql> insert into test.t set r1 = -1.3, r2 = -1.1
mysql> insert into test.t set r1 = 3.3, r2 = 1.1
mysql> insert into test.t set r1 = -3.3, r2 = 1.1
mysql> insert into test.t set r1 = 3.3, r2 = -1.1
mysql> insert into test.t set r1 = -3.3, r2 = -1.1
#mysql> insert into test.t set r1 = 1, r0 = 0

# extra cases for DECIMAL type
mysql> insert into test.t set d1 = 1.3, d2 = 1.1
mysql> insert into test.t set d1 = -1.3, d2 = 1.1
mysql> insert into test.t set d1 = 1.3, d2 = -1.1
mysql> insert into test.t set d1 = -1.3, d2 = -1.1
mysql> insert into test.t set d1 = 3.3, d2 = 1.1
mysql> insert into test.t set d1 = -3.3, d2 = 1.1
mysql> insert into test.t set d1 = 3.3, d2 = -1.1
mysql> insert into test.t set d1 = -3.3, d2 = -1.1
#mysql> insert into test.t set d1 = 1, d2 = 0

func> wait_table test t

#mysql> select count(*), (u1 % u2) as result from test.t group by result order by result;
#+----------+--------+
#| count(*) | result |
#+----------+--------+
#|       55 |   NULL |
#|        1 |      0 |
#|        1 |      2 |
#+----------+--------+

#mysql> select count(*), (u1 % s2) as result from test.t group by result order by result;
#+----------+--------+
#| count(*) | result |
#+----------+--------+
#|       52 |   NULL |
#|        3 |      0 |
#|        2 |      2 |
#+----------+--------+

#mysql> select count(*), (s1 % u2) as result from test.t group by result order by result;
#+----------+--------+
#| count(*) | result |
#+----------+--------+
#|       51 |   NULL |
#|        3 |     -2 |
#|        2 |      0 |
#|        1 |      2 |
#+----------+--------+

#mysql> select count(*), (s1 % s2) as result from test.t group by result order by result;
#+----------+--------+
#| count(*) | result |
#+----------+--------+
#|       48 |   NULL |
#|        2 |     -2 |
#|        4 |      0 |
#|        3 |      2 |
#+----------+--------+

#mysql> select count(*), (r1 % r2) as result from test.t group by result order by result;
#+----------+----------------------+
#| count(*) | result               |
#+----------+----------------------+
#|       49 |                 NULL |
#|        2 |  -1.0999999999999996 |
#|        2 | -0.19999999999999996 |
#|        2 |  0.19999999999999996 |
#|        2 |   1.0999999999999996 |
#+----------+----------------------+

mysql> select count(*), (d1 % d2) as result from test.t group by result order by result;
+----------+----------+
| count(*) | result   |
+----------+----------+
|       49 |     NULL |
|        2 | -0.20000 |
|        4 |  0.00000 |
|        2 |  0.20000 |
+----------+----------+

# from TiDB TestArithmeticMod

#mysql> select count(*), (u1 % s2) as result from test.t group by result order by result;
#+----------+--------+
#| count(*) | result |
#+----------+--------+
#|       52 |   NULL |
#|        3 |      0 |
#|        2 |      2 |
#+----------+--------+

#mysql> select count(*), (s1 % u2) as result from test.t group by result order by result;
#+----------+--------+
#| count(*) | result |
#+----------+--------+
#|       51 |   NULL |
#|        3 |     -2 |
#|        2 |      0 |
#|        1 |      2 |
#+----------+--------+

#mysql> select count(*), (s1 % r2) as result from test.t group by result order by result;
#+----------+--------+
#| count(*) | result |
#+----------+--------+
#|       53 |   NULL |
#|        2 |     -1 |
#|        2 |      1 |
#+----------+--------+

#mysql> select count(*), (null % r2) as result from test.t group by result order by result;
#+----------+--------+
#| count(*) | result |
#+----------+--------+
#|       57 |   NULL |
#+----------+--------+

#mysql> select count(*), (r1 % null) as result from test.t group by result order by result;
#+----------+--------+
#| count(*) | result |
#+----------+--------+
#|       57 |   NULL |
#+----------+--------+

#mysql> select count(*), (null % s2) as result from test.t group by result order by result;
#+----------+--------+
#| count(*) | result |
#+----------+--------+
#|       57 |   NULL |
#+----------+--------+

#mysql> select count(*), (s1 % null) as result from test.t group by result order by result;
#+----------+--------+
#| count(*) | result |
#+----------+--------+
#|       57 |   NULL |
#+----------+--------+

#mysql> select count(*), (null % null) as result from test.t group by result order by result;
#+----------+--------+
#| count(*) | result |
#+----------+--------+
#|       57 |   NULL |
#+----------+--------+

#mysql> select count(*), (c1 % s2) as result from test.t group by result order by result;
#+----------+--------+
#| count(*) | result |
#+----------+--------+
#|       56 |   NULL |
#|        1 |      7 |
#+----------+--------+

#mysql> select count(*), (c1 % c2) as result from test.t group by result order by result;
#+----------+--------+
#| count(*) | result |
#+----------+--------+
#|       56 |   NULL |
#|        1 |      7 |
#+----------+--------+

#mysql> select count(*), (t1 % s2) as result from test.t group by result order by result;
#+----------+--------+
#| count(*) | result |
#+----------+--------+
#|       56 |   NULL |
#|        1 |    114 |
#+----------+--------+

#mysql> select count(*), (v1 % c2) as result from test.t group by result order by result;
#+----------+--------+
#| count(*) | result |
#+----------+--------+
#|       56 |   NULL |
#|        1 |      7 |
#+----------+--------+
