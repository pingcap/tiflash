mysql> drop table if exists test.t
mysql> create table test.t(a int)
mysql> alter table test.t set tiflash replica 1 location labels 'rack', 'host', 'abc'

SLEEP 15

mysql> insert into test.t values (1);
# Two fail cases, maybe add more case later.
mysql> alter table t add s varchar(999) default 'sss'
mysql> alter table t add e enum('unknown', 'male','female') default 'unknown'

SLEEP 15

mysql> set session tidb_isolation_read_engines='tiflash'; select * from test.t;
+---+-----+---------+
| a | s   | e       |
+---+-----+---------+
| 1 | sss | unknown |
+---+-----+---------+

>> desc test.t
┌─name────────┬─type────────────────────────────────────────────────────────────┬─default_type─┬─default_expression─────────────────────────────────────────────────────────┐
│ a           │ Nullable(Int32)                                                 │              │                                                                            │
│ _tidb_rowid │ Int64                                                           │              │                                                                            │
│ s           │ Nullable(String)                                                │ DEFAULT      │ CAST(\'sss\' AS Nullable(String))                                          │
│ e           │ Nullable(Enum16(\'unknown\' = 1, \'male\' = 2, \'female\' = 3)) │ DEFAULT      │ CAST(1 AS Nullable(Enum16(\'unknown\' = 1, \'male\' = 2, \'female\' = 3))) │
└─────────────┴─────────────────────────────────────────────────────────────────┴──────────────┴────────────────────────────────────────────────────────────────────────────┘

mysql> drop table if exists test.t
