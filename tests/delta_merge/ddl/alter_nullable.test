>> drop table if exists dm_test

>> create table dm_test (
        a Int16,
        b Nullable(Int32),
        c Nullable(Int32),
        d Nullable(String),
        e Nullable(DateTime)
   ) engine = DeltaMerge(a)

>> insert into table dm_test(a) values(100)
>> insert into table dm_test values(20000, 2048, 65535, 'Hello TiFlash', '1999-09-09 00:00:00')
>> select * from dm_test
┌─────a─┬────b─┬─────c─┬─d─────────────┬───────────────────e─┐
│   100 │   \N │    \N │ \N            │                  \N │
│ 20000 │ 2048 │ 65535 │ Hello TiFlash │ 1999-09-09 00:00:00 │
└───────┴──────┴───────┴───────────────┴─────────────────────┘

>> alter table dm_test MODIFY COLUMN b Int32 default 0
>> alter table dm_test MODIFY COLUMN c Int64 default 0
>> alter table dm_test MODIFY COLUMN d String default ''
>> alter table dm_test MODIFY COLUMN e DateTime default '0000-00-00 00:00:00'
>> select * from dm_test
┌─────a─┬────b─┬─────c─┬─d─────────────┬───────────────────e─┐
│   100 │    0 │     0 │               │ 0000-00-00 00:00:00 │
│ 20000 │ 2048 │ 65535 │ Hello TiFlash │ 1999-09-09 00:00:00 │
└───────┴──────┴───────┴───────────────┴─────────────────────┘

>> drop table if exists dm_test


## tests for non-empty default value
>> create table dm_test (
        a Int16,
        b Nullable(Int32),
        c Nullable(Int32),
        d Nullable(String),
        e Nullable(DateTime)
   ) engine = DeltaMerge(a)

>> insert into table dm_test(a) values(100)
>> insert into table dm_test values(20000, 2048, 65535, 'Hello TiFlash', '1999-09-09 00:00:00')
>> select * from dm_test
┌─────a─┬────b─┬─────c─┬─d─────────────┬───────────────────e─┐
│   100 │   \N │    \N │ \N            │                  \N │
│ 20000 │ 2048 │ 65535 │ Hello TiFlash │ 1999-09-09 00:00:00 │
└───────┴──────┴───────┴───────────────┴─────────────────────┘

>> alter table dm_test MODIFY COLUMN b Int32 default 1
>> alter table dm_test MODIFY COLUMN c Int64 default 255
>> alter table dm_test MODIFY COLUMN d String default 'non-empty'
>> alter table dm_test MODIFY COLUMN e DateTime default '2000-01-01 11:22:33'
# DISABLED for now
#>> select * from dm_test
#┌─────a─┬────b─┬─────c─┬─d─────────────┬───────────────────e─┐
#│   100 │    1 │   255 │ non-empty     │ 2000-01-01 11:22:33 │
#│ 20000 │ 2048 │ 65535 │ Hello TiFlash │ 1999-09-09 00:00:00 │
#└───────┴──────┴───────┴───────────────┴─────────────────────┘

## Clean up
>> drop table if exists dm_test
